(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{11:function(e,t,n){e.exports={header:"appHeaderStyles_header__1uX7e",container:"appHeaderStyles_container__2DiZC",logo:"appHeaderStyles_logo__2J53j",menu_btn:"appHeaderStyles_menu_btn__3KE6s",nav__menu_left:"appHeaderStyles_nav__menu_left__2Yvor",nav__menu_right:"appHeaderStyles_nav__menu_right__3ngqo"}},12:function(e,t,n){e.exports={container:"ingredientDetails_container__KpR85",captioncontainer:"ingredientDetails_captioncontainer__3pHY6",element:"ingredientDetails_element__2UcXl",header:"ingredientDetails_header__17hmJ",icon:"ingredientDetails_icon__19E5z"}},14:function(e,t,n){e.exports={main_container:"burgerConstructorStyles_main_container__DHTqR",top_container:"burgerConstructorStyles_top_container__Wu0Yf",bottom_container:"burgerConstructorStyles_bottom_container__3lhyr",constructor_container:"burgerConstructorStyles_constructor_container__1K4UT",container_wrapper:"burgerConstructorStyles_container_wrapper__3FMDq",outcome:"burgerConstructorStyles_outcome__1YDGP",price:"burgerConstructorStyles_price__Edu5Z"}},160:function(e,t){},161:function(e,t){},162:function(e,t){},163:function(e,t){},164:function(e,t){},165:function(e,t){},166:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(20),i=n.n(c),s=(n(80),n(47)),o=n.n(s),l=n(73),d=n(9),u=n(13),m=n(48),j=n.n(m),_=n(11),p=n.n(_),b=(n(27),n(5)),x=n(0);var O=function(){return Object(x.jsx)("header",{className:p.a.header,children:Object(x.jsxs)("div",{className:p.a.container,children:[Object(x.jsxs)("nav",{className:p.a.nav__menu_left,children:[Object(x.jsxs)("a",{href:"#",className:"".concat(p.a.menu_btn," pt-4 pb-4 pl-5 pr-5"),children:[Object(x.jsx)(b.BurgerIcon,{type:"primary"}),Object(x.jsx)("p",{className:"text text_type_main-default pl-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(x.jsxs)("a",{href:"#",className:"".concat(p.a.menu_btn," pt-4 pb-4 pl-5 pr-5"),children:[Object(x.jsx)(b.ListIcon,{type:"secondary"}),Object(x.jsx)("p",{className:"text text_type_main-default text_color_inactive pl-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(x.jsx)("a",{href:"#",className:p.a.logo,children:Object(x.jsx)(b.Logo,{})}),Object(x.jsx)("nav",{className:p.a.nav__menu_right,children:Object(x.jsxs)("a",{href:"#",className:"".concat(p.a.menu_btn," pt-4 pb-4 pl-5 pr-5"),children:[Object(x.jsx)(b.ProfileIcon,{type:"secondary"}),Object(x.jsx)("p",{className:"text text_type_main-default text_color_inactive pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},f=n(2),g=n.n(f),h=g.a.shape({_id:g.a.string,name:g.a.string,type:g.a.string,proteins:g.a.number,fat:g.a.number,carbohydrates:g.a.number,calories:g.a.number,price:g.a.number,image:g.a.string,image_mobile:g.a.string,image_large:g.a.string}),y=n(74),v=n.n(y),N=n(21),C=n.n(N),S=n(46),D=n(45),E=function(e){var t=e.id,n=e.image,r=e.name,a=e.price,c=e.openModal;return Object(x.jsxs)("div",{className:C.a.ingredient_element,children:[Object(x.jsxs)("div",{className:C.a.ingredient_content,onClick:function(){c({modalType:"ingredientDetail",itemId:t})},children:[Object(x.jsx)("img",{alt:"\u0424\u043e\u0442\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",src:n,className:C.a.element_img}),Object(x.jsxs)("p",{className:C.a.price,children:[a,Object(x.jsx)(D.CurrencyIcon,{type:"primary"})]}),Object(x.jsx)("p",{className:"text text_type_main-default",children:r})]}),Object(x.jsx)(S.Counter,{size:"default",count:1})]})},k=(g.a.shape({name:g.a.string.isRequired,price:g.a.number.isRequired,image:g.a.string.isRequired}),a.a.forwardRef((function(e,t){var n=e.groupName,r=e.groupElement,a=e.openModal;return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"mt-10 mb-6",children:Object(x.jsx)("p",{className:"text text_type_main-medium",ref:t,children:n})}),Object(x.jsx)("div",{className:"".concat(v.a.content),children:r.map((function(e){return Object(x.jsx)(E,{id:e._id,image:e.image,name:e.name,price:e.price,openModal:a},e._id)}))})]})}))),R=(g.a.shape({groupName:g.a.string.isRequired,groupElement:h,openModal:g.a.func.isRequired}),n(25)),q=n.n(R),M=Object(r.createContext)();var T=function(e){var t=e.openModal,n=Object(r.useContext)(M),a=Object(r.useMemo)((function(){return n.filter((function(e){return"bun"===e.type}))}),[n]),c=Object(r.useMemo)((function(){return n.filter((function(e){return"sauce"===e.type}))}),[n]),i=Object(r.useMemo)((function(){return n.filter((function(e){return"main"===e.type}))}),[n]),s=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)(null),d=Object(r.useState)("buns"),m=Object(u.a)(d,2),j=m[0],_=m[1];function p(e){e&&e.scrollIntoView({behavior:"smooth"})}return Object(x.jsxs)("section",{className:"".concat(q.a.burger_ingredients," pt-10"),children:[Object(x.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(x.jsxs)("div",{className:"".concat(q.a.burger_menu_tab," mt-5 mb-10"),children:[Object(x.jsx)(b.Tab,{value:"buns",active:"buns"===j,onClick:function(e){_(e),p(s.current)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(x.jsx)(b.Tab,{value:"sauses",active:"sauses"===j,onClick:function(e){_(e),p(o.current)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(x.jsx)(b.Tab,{value:"fillings",active:"fillings"===j,onClick:function(e){_(e),p(l.current)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(x.jsxs)("ul",{className:"".concat(q.a.burger_list_container," pt-25"),onScroll:function(e){var t=e.target.scrollTop,n=(s.current.offsetTop,o.current.offsetTop),r=l.current.offsetTop;_(t+440<=n?"buns":t+440<=r?"sauses":"fillings")},children:[Object(x.jsx)("li",{children:Object(x.jsx)(k,{groupName:"\u0411\u0443\u043b\u043a\u0438",groupElement:a,ref:s,openModal:t})}),Object(x.jsx)("li",{children:Object(x.jsx)(k,{groupName:"\u0421\u043e\u0443\u0441\u044b",groupElement:c,ref:o,openModal:t})}),Object(x.jsx)("li",{children:Object(x.jsx)(k,{groupName:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",groupElement:i,ref:l,openModal:t})})]})]})},I=(g.a.shape({openModal:g.a.func.isRequired,ingredientContext:g.a.arrayOf(h.isRequired).isRequired}),n(14)),w=n.n(I),L=function(e){var t=e.handleMakeOrder,n=Object(r.useContext)(M),a=n.find((function(e){return"bun"===e.type})),c=n.filter((function(e){return"bun"!==e.type})),i=(a?2*a.price:0)+(c?c.reduce((function(e,t){return e+t.price}),0):0);return Object(x.jsxs)("section",{className:"".concat(w.a.main_container," pt-25"),children:[a&&Object(x.jsx)("div",{className:w.a.top_container,children:Object(x.jsx)(b.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(a.name," (\u0432\u0435\u0440\u0445)"),price:a.price,thumbnail:a.image})}),c&&Object(x.jsx)("div",{className:w.a.constructor_container,children:c.map((function(e){return Object(x.jsxs)("div",{className:w.a.container_wrapper,children:[Object(x.jsx)("div",{className:"mr-1",children:Object(x.jsx)(b.DragIcon,{type:"primary"})}),Object(x.jsx)(b.ConstructorElement,{text:e.name,price:e.price,thumbnail:e.image})]},e._id)}))}),a&&Object(x.jsx)("div",{className:w.a.bottom_container,children:Object(x.jsx)(b.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(a.name," (\u0432\u0435\u0440\u0445)"),price:a.price,thumbnail:a.image})}),Object(x.jsxs)("div",{className:w.a.outcome,children:[Object(x.jsxs)("div",{className:w.a.price,children:[Object(x.jsx)("p",{className:"text text_type_digits-medium mr-2",children:i}),Object(x.jsx)(b.CurrencyIcon,{type:"primary"})]}),Object(x.jsx)(b.Button,{type:"primary",size:"large",onClick:t,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},F=(g.a.shape({openModal:g.a.func.isRequired,ingredientContext:g.a.arrayOf(h.isRequired).isRequired}),n(49)),P=n.n(F),H=(n(70),n(75)),J=n.n(H),B=function(e){var t=e.children,n=e.onClick;return Object(x.jsx)("div",{className:J.a.overlay,onClick:n,children:t})},U=(g.a.shape({onClick:g.a.func.isRequired,children:g.a.element.isRequired}),document.getElementById("modal-root")),Y=function(e){var t=e.closeModal,n=e.children;function r(e){"Escape"===e.key&&(e.preventDefault(),t())}return a.a.useEffect((function(){return document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}),[]),Object(c.createPortal)(Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(B,{onClick:function(e){e.target===e.currentTarget&&t()},children:Object(x.jsxs)("div",{className:P.a.modal,children:[Object(x.jsx)("div",{className:P.a.modal_closebtn,children:Object(x.jsx)(b.CloseIcon,{type:"primary",onClick:t})}),n]})})}),U)},K=(g.a.shape({closeModal:g.a.func.isRequired,children:g.a.element.isRequired}),n.p+"static/media/doneImg.6d4020a5.svg"),X=n(17),Z=n.n(X),z=Object(r.createContext)();var A=function(){var e=Object(r.useContext)(z),t=e.orderId,n=e.isCreatingOrder,a=e.error;return Object(x.jsxs)(x.Fragment,{children:[n&&Object(x.jsxs)("div",{className:"".concat(Z.a.container," pt-30 pb-25"),children:[Object(x.jsx)("div",{className:"".concat(Z.a.loader)}),Object(x.jsx)("span",{className:"".concat(Z.a.spanLoader),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]}),!n&&!a&&t&&Object(x.jsxs)("div",{className:"".concat(Z.a.container," pt-30 pb-25"),children:[Object(x.jsx)("div",{className:"mb-8",children:Object(x.jsx)("p",{className:"".concat(Z.a.glow," text text_type_digits-large"),children:t.order.number})}),Object(x.jsx)("p",{className:"text text_type_main-medium",children:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(x.jsx)("img",{className:"".concat(Z.a.icon," mb-15 mt-15"),alt:"\u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",src:K}),Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(x.jsx)("div",{className:"mt-2",children:Object(x.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})})]})]})},G=n(12),V=n.n(G);var W=function(e){var t=e.image,n=e.name,r=e.calories,a=e.fat,c=e.proteins,i=e.carbohydrates;return Object(x.jsxs)("div",{className:"".concat(V.a.container," p-10"),children:[Object(x.jsx)("p",{className:"".concat(V.a.header," text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(x.jsx)("img",{className:"".concat(V.a.icon),alt:"\u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",src:t}),Object(x.jsx)("p",{className:"text text_type_main-medium",children:n}),Object(x.jsxs)("div",{className:"".concat(V.a.captioncontainer," mt-8 text_color_inactive"),children:[Object(x.jsxs)("div",{className:"".concat(V.a.element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:r})]}),Object(x.jsxs)("div",{className:"".concat(V.a.element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:c})]}),Object(x.jsxs)("div",{className:"".concat(V.a.element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:a})]}),Object(x.jsxs)("div",{className:"".concat(V.a.element," mr-5"),children:[Object(x.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(x.jsx)("p",{className:"text text_type_digits-default",children:i})]})]})]})},Q=(g.a.shape({image:g.a.string.isRequired,name:g.a.string.isRequired,calories:g.a.number.isRequired,fat:g.a.number.isRequired,proteins:g.a.number.isRequired,carbohydrates:g.a.number.isRequired}),"https://norma.nomoreparties.space/api");var $=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," - ").concat(e.statusText))};var ee=function(){var e=Object(r.useState)({isLoading:!0,hasError:!1,error:"",inputDataFromServer:[]}),t=Object(u.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){fetch("".concat(Q,"/ingredients")).then((function(e){return $(e)})).then((function(e){a((function(t){return Object(d.a)(Object(d.a)({},t),{},{isLoading:!1,inputDataFromServer:e.data})}))})).catch((function(e){a((function(t){return Object(d.a)(Object(d.a)({},t),{},{isLoading:!1,hasError:!0,error:e})}))}))}),[]);var c=Object(r.useState)(!1),i=Object(u.a)(c,2),s=i[0],m=i[1],_=Object(r.useState)(!1),p=Object(u.a)(_,2),b=p[0],f=p[1],g=Object(r.useState)({data:null}),h=Object(u.a)(g,2),y=h[0],v=h[1];function N(e){var t=e.modalType,r=e.itemId,a=null;"ingredientDetail"===t?(f(!0),a=n.inputDataFromServer.find((function(e){return e._id===r})),v({data:a})):"orderDetail"===t&&m(!0)}function C(){m(!1),f(!1)}var S=n.inputDataFromServer,D=Object(r.useState)({orderId:null,isCreatingOrder:!1,error:""}),E=Object(u.a)(D,2),k=E[0],R=E[1],q=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.find((function(e){return"bun"===e.type?e:0}))._id,n=S.filter((function(e){return"bun"!==e.type})).map((function(e){return e._id})),r=n.concat(t,t),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:r})},e.prev=4,R(Object(d.a)(Object(d.a)({},k),{},{isCreatingOrder:!0})),e.next=8,fetch("".concat(Q,"/orders"),a);case 8:if(!(c=e.sent).ok){e.next=16;break}return e.next=12,c.json();case 12:i=e.sent,R(Object(d.a)(Object(d.a)({},k),{},{isCreatingOrder:!1,orderId:i})),e.next=17;break;case 16:throw new Error("Error ".concat(c.status));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),R(Object(d.a)(Object(d.a)({},k),{},{isCreatingOrder:!1,error:e.t0}));case 22:N({modalType:"orderDetail"});case 23:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:j.a.app,children:[Object(x.jsx)(O,{}),Object(x.jsxs)("main",{className:j.a.content,children:[Object(x.jsx)(M.Provider,{value:S,children:Object(x.jsx)(T,{openModal:N})}),Object(x.jsx)(M.Provider,{value:S,children:Object(x.jsx)(L,{handleMakeOrder:q})})]}),b&&Object(x.jsx)(Y,{closeModal:C,children:Object(x.jsx)(W,{image:y.data.image,name:y.data.name,calories:y.data.calories,fat:y.data.fat,proteins:y.data.proteins,carbohydrates:y.data.carbohydrates})}),Object(x.jsx)(z.Provider,{value:k,children:s&&Object(x.jsx)(Y,{closeModal:C,children:Object(x.jsx)(A,{})})})]})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,167)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(x.jsx)(ee,{}),document.getElementById("root")),te()},17:function(e,t,n){e.exports={container:"orderDetails_container__1TOra",icon:"orderDetails_icon__HKjCl",glow:"orderDetails_glow__JcBYS",loader:"orderDetails_loader__1jDr-",spanLoader:"orderDetails_spanLoader__37K9J",text:"orderDetails_text__3u_sB"}},21:function(e,t,n){e.exports={ingredient_element:"ingredientElementStyles_ingredient_element__3JUYt",ingredient_content:"ingredientElementStyles_ingredient_content__3DxSS",element_img:"ingredientElementStyles_element_img__29zZx",counter:"ingredientElementStyles_counter__2xuGD",price:"ingredientElementStyles_price__1U1yw"}},25:function(e,t,n){e.exports={burger_ingredients:"burgerIngredientsStyles_burger_ingredients__sVE_0",burger_menu_tab:"burgerIngredientsStyles_burger_menu_tab__58iED",burger_list_container:"burgerIngredientsStyles_burger_list_container__3lOlU"}},48:function(e,t,n){e.exports={app:"appStyles_app__BfjSk",content:"appStyles_content__1TAF7"}},49:function(e,t,n){e.exports={modal:"modal_modal__1XpcX",modal_closebtn:"modal_modal_closebtn__3tZAr"}},71:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=71},72:function(e,t){},74:function(e,t,n){e.exports={content:"ingredientGroupStyles_content__2lSXA"}},75:function(e,t,n){e.exports={overlay:"modalOverlay_overlay__35JZj"}},80:function(e,t,n){}},[[166,1,2]]]);
//# sourceMappingURL=main.4de61e5e.chunk.js.map